@model IEnumerable<DesapegAutoWeb.Models.AnuncioViewModel>
@{
    ViewData["Title"] = "Página Inicial";
}

<div class="home-header">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="welcome-section">
                    <h1 class="welcome-text">Olá, João Silva</h1>
                    <div class="user-actions">
                        <a href="#" class="btn btn-link user-icon">
                            <i class="fas fa-user"></i>
                        </a>
                        <a href="#" class="btn btn-link help-icon">
                            <i class="fas fa-question-circle"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <div class="search-section">
                <div class="search-card">
                    <form asp-controller="Home" asp-action="Search" method="get">
                        <div class="search-input-group">
                            <input type="text" name="termo" class="form-control search-input"
                                   placeholder="Selecione marca ou modelo do veículo" />
                        </div>
                        <div class="search-button-group mt-3">
                            <button type="submit" class="btn btn-primary search-btn">Ver anúncios</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-5">
        <div class="col-12">
            <h2 class="section-title">Alguns anúncios</h2>
        </div>
    </div>

    <div class="row">
        @if (Model != null && Model.Any())
        {
            @foreach (var anuncio in Model)
            {
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="vehicle-card">
                        <div class="vehicle-image placeholder-image">
                            <i class="fas fa-image"></i>
                        </div>
                        <div class="vehicle-info">
                            <h3 class="vehicle-title">@(anuncio.Veiculo?.NomeMarca ?? "") @(anuncio.Veiculo?.NomeModelo ?? "")</h3>
                            <p class="vehicle-year">@anuncio.Veiculo?.Ano</p>
                            <p class="vehicle-price">@anuncio.Veiculo?.Preco.ToString("C")</p>
                            <div class="vehicle-actions">
                                <a asp-controller="Anuncio" asp-action="Details" asp-route-id="@anuncio.Id" class="btn btn-outline-primary vehicle-details-btn">Ver detalhes</a>
                            </div>
                        </div>
                    </div>
                </div>
            }
        }
        else
        {
            <div class="col-md-6 col-lg-4 mb-4">
                <div class="vehicle-card">
                    <div class="vehicle-image placeholder-image">
                        <i class="fas fa-image"></i>
                    </div>
                    <div class="vehicle-info">
                        <h3 class="vehicle-title">Nenhum anúncio disponível</h3>
                        <p class="vehicle-year">-</p>
                        <p class="vehicle-price">R$ 0,00</p>
                    </div>
                </div>
            </div>
        }
    </div>

    <div class="row mt-4">
        <div class="col-12 text-center">
            <a asp-controller="Home" asp-action="Search" class="btn btn-primary">Ver todos os anúncios</a>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Adicionar funcionalidade de busca dinâmica se necessário
        $(document).ready(function() {
            $('.search-input').on('focus', function() {
                $(this).parent().addClass('focused');
            });

            $('.search-input').on('blur', function() {
                $(this).parent().removeClass('focused');
            });
        });
    </script>
}
