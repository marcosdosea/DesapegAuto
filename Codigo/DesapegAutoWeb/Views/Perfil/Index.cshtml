@using DesapegAutoWeb.Controllers
@model PerfilViewModel
@{
    ViewData["Title"] = "Meu Perfil";
}

<div class="da-page">
    <h1 class="da-title">Meu Perfil</h1>

    <div class="da-tab-switch">
        <button type="button" class="da-switch-btn is-active" data-switch="infos">Informações</button>
        <button type="button" class="da-switch-btn" data-switch="senha">Alterar Senha</button>
    </div>

    <section id="switch-infos" class="da-switch-panel is-active da-card da-card-pad">
        <h2 class="da-subtitle">Dados da Concessionária</h2>

        <form class="da-stack" method="get" asp-area="Identity" asp-page="/Account/Manage/Index">
            <div class="da-field">
                <label class="da-label">Nome da Concessionária</label>
                <input class="da-input" value="@Model.UserName" readonly />
            </div>
            <div class="da-field">
                <label class="da-label">CNPJ</label>
                <input class="da-input" value="12.345.678/0001-90" readonly />
            </div>
            <div class="da-field">
                <label class="da-label">E-mail</label>
                <input class="da-input" value="@Model.Email" readonly />
            </div>
            <div class="da-field">
                <label class="da-label">Telefone</label>
                <input class="da-input" value="@(string.IsNullOrWhiteSpace(Model.PhoneNumber) ? "(00) 0000-0000" : Model.PhoneNumber)" readonly />
            </div>
            <div class="da-field">
                <label class="da-label">Endereço</label>
                <textarea class="da-textarea" readonly>Av. Brasil, 150, São Paulo - SP</textarea>
            </div>

            <div class="da-top-actions" style="margin-bottom:0;">
                <a class="da-btn da-btn-outline" asp-controller="Home" asp-action="Index">Cancelar</a>
                <button type="submit" class="da-btn da-btn-primary">Salvar alterações</button>
            </div>
        </form>
    </section>

    <section id="switch-senha" class="da-switch-panel da-card da-card-pad">
        <h2 class="da-subtitle">Alterar senha</h2>
        <p class="da-muted">Use o fluxo seguro de alteração de senha da sua conta.</p>
        <a asp-area="Identity" asp-page="/Account/Manage/ChangePassword" class="da-btn da-btn-primary">Ir para alterar senha</a>
    </section>
</div>

@section Scripts {
    <script>
        document.querySelectorAll('.da-switch-btn').forEach(function (button) {
            button.addEventListener('click', function () {
                document.querySelectorAll('.da-switch-btn').forEach(function (btn) {
                    btn.classList.remove('is-active');
                });
                document.querySelectorAll('.da-switch-panel').forEach(function (panel) {
                    panel.classList.remove('is-active');
                });

                button.classList.add('is-active');
                var panel = document.getElementById('switch-' + button.dataset.switch);
                if (panel) {
                    panel.classList.add('is-active');
                }
            });
        });
    </script>
}
